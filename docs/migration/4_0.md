# Technical Changes in Spartacus 4.0

## Before migrating to Spartacus 4.0

Before the 3.0 release we started to separate libraries based on it's responsibility. With 3.0 we already released few libraries in separate packages (eg. @spartacus/organization, @spartacus/storefinder). We kept moving more libraries in the minor 3.x releases as well. We tried to do that in a no breaking-changes manner. However with each major release we want to pay off tech debt we accumulated during minor releases. Extracted libraries are huge contributor to tech debt, as we keep the same functionality in 2 places. With 4.0 release we will remove the functionality from core libraries (@spartacus/core, @spartacus/storefront, @spartacus/assets and @spartacus/styles) that was already extracted to separate libraries in minor releases.

Along the way we discovered that we had to change few of the bigger modules to accommodate these changes (eg. `B2cStoreFrontModule`, `StorefrontModule` or `CmsLibModule`).

So before you migrate to version 4.0 of libraries we recommend to switch to new app structure that is not using these modules and to switch to new feature libraries if they exists for the features you are using. Below you can find generic guide on how to do it.

## Migrating to new, reference app structure

Before you start to migrate to new app structure read the reasoning behind the change [here](https://sap.github.io/spartacus-docs/reference-app-structure/).

So let's migrate to the new structure step by step.

## Breaking Changes Introduced in 4.0
